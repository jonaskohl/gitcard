window.addEventListener("DOMContentLoaded",()=>{const e={facebook:"Facebook",instagram:"Instagram",twitter:"Twitter",github:"GitHub",telegram:"Telegram",keybase:"Keybase",deviantart:"DeviantArt",tumblr:"Tumblr",artstation:"ArtStation",reddit:"Reddit",youtube:"YouTube",vimeo:"Vimeo",mail:"Email",web:"Website"};const t=document.querySelector("#link_entry_template"),n=document.querySelector("#link_list"),o=document.querySelector("#output"),r=document.querySelector("#preview_link");function c(){const e=function(){const e=document.querySelector("#name").value.trim(),t=document.querySelector("#pronouns").value.trim().length>0?document.querySelector("#pronouns").value:"-omit-",n=document.querySelector("#bio").value.trim(),o=[];document.querySelectorAll("#link_list>.link_entry").forEach(e=>{const t=e.querySelector(".link_entry_site").value+"@"+e.querySelector(".link_entry_username").value;o.push(t)});const r="links:\n"+o.join("\n")+"\nend;",c=[document.querySelector("#color_fg").jscolor.toHEXString(),document.querySelector("#color_bg").jscolor.toHEXString(),document.querySelector("#color_ln").jscolor.toHEXString(),document.querySelector("#color_la").jscolor.toHEXString()].join("\n");return[e,t,n,r,c].join("\n")+"\n"}();o.value=e,r.href="/preview/"+encodeURI(btoa(JSON.stringify({ts:Math.round((new Date).getTime()/1e3),content:e})))}document.querySelector("#add_link_btn").addEventListener("click",o=>{const r=t.content.cloneNode(!0),l=r.querySelector(".link_entry_site"),u=r.querySelector(".link_entry_username"),i=r.querySelector(".rem_link_btn");Object.keys(e).forEach(t=>{const n=e[t],o=document.createElement("option");o.value=t,o.innerText=n,l.appendChild(o)}),l.addEventListener("change",c),u.addEventListener("input",c),i.addEventListener("click",()=>{var e;(e=i).parentElement.parentElement.removeChild(e.parentElement)}),n.appendChild(r)}),document.querySelector("#name").addEventListener("input",c),document.querySelector("#pronouns").addEventListener("input",c),document.querySelector("#bio").addEventListener("input",c),document.querySelector("#color_fg").jscolor.onFineChange=()=>c(),document.querySelector("#color_bg").jscolor.onFineChange=()=>c(),document.querySelector("#color_ln").jscolor.onFineChange=()=>c(),document.querySelector("#color_la").jscolor.onFineChange=()=>c()});